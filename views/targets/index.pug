extend ../layout

block content
    .container-fluid 
        .row.mt-4  
            .col-1
            .col-10
                .row.mb-4.align-items-center 
                    .col-8
                        h1
                            a(href=`/projects/${project.id}`)= project.name
                            span.gray  / Targets
                    .col-4.text-end
                        a(href=`/projects/${project.id}/targets/new`).btn New target

                include ../includes/flash

                if targets && targets.length > 0
                    each target in targets
                        .card.mb-3
                            .card-body
                                .d-flex.justify-content-between.align-items-start
                                    div
                                        h3
                                            a(href=`/projects/${project.id}/targets/${target.id}`)= target.name
                                        
                                        p.small.gray Due: #{target.dueDate || 'N/A'}
                                        p.gray.italic= target.description || 'N/A'
                                        
                                    div.text-end
                                        .mb-2
                                            strong #{target.progress}%
                                            span.gray.ml-2 (#{target.completedMilestones}/#{target.totalMilestones} milestones)
                                        .progress-bar(style="width: 150px; height: 8px; background: #e0e0e0; border-radius: 4px;")
                                            .progress-fill(style=`width: ${target.progress}%; height: 100%; background: ${target.progress === 100 ? '#28a745' : '#007bff'}; border-radius: 4px;`)
                else
                    p.gray No targets found.

            .col-1
